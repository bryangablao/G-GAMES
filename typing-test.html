<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Typing Test</title>
<style>
/* === Global Body & Background === */
body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  margin: 0; padding: 0;
  text-align: center;
  color: #fff;
  background: radial-gradient(circle at top left, #380098, black);
  background-size: 200% 200%;
  animation: gradientMove 10s infinite alternate;
  overflow-x: hidden;
}
@keyframes gradientMove {
  0%{background-position:0% 50%;}
  100%{background-position:100% 50%;}
}

/* === Header === */
header {
  background: linear-gradient(90deg, #8a2be2, #4b0082);
  padding: 30px 20px;
  font-size: 36px;
  font-weight: bold;
  letter-spacing: 1px;
  color: white;
  text-shadow: 0 0 5px #fff,0 0 10px #8a2be2,0 0 20px #4b0082,0 0 30px #8a2be2;
  animation: neon-flicker 2s infinite alternate;
  position: relative;
  z-index: 10;
}
@keyframes neon-flicker {
  0%,19%,21%,23%,25%,54%,56%,100% {text-shadow:0 0 5px #fff,0 0 10px #8a2be2,0 0 20px #4b0082,0 0 30px #8a2be2;}
  20%,24%,55% {text-shadow:0 0 2px #fff,0 0 5px #8a2be2,0 0 10px #4b0082,0 0 15px #8a2be2;}
}

/* === Help Icon === */
#helpIcon {
  position: absolute;
  top: 10px; right: 15px;
  font-size: 24px;
  width: 35px; height: 35px;
  line-height: 35px;
  background: rgba(255,255,255,0.1);
  border-radius: 50%;
  cursor: pointer; user-select: none;
  z-index: 20;
}
#helpText {
  display: none;
  position: absolute;
  top: 70px; right: 15px;
  background: rgba(0,0,0,0.8);
  padding: 15px;
  border-radius: 10px;
  width: 250px;
  text-align: left;
  font-size: 14px;
  color: #fff;
  box-shadow: 0 0 10px #8a2be2;
  z-index: 20;
}

/* === Container & Buttons === */
.container {
  max-width: 800px; 
  margin: 20px auto; 
  position: relative; 
  z-index: 10;
  display: flex;
  flex-direction: column;
  align-items: center;
  flex-grow: 1;
  padding: 0 20px; /* spacing from sides */
  box-sizing: border-box;
}

.controls {
  margin-bottom: 20px;
}

.controls button,
.back-button {
  background: linear-gradient(135deg,#8a2be2,#4b0082);
  border: none; 
  padding: 12px 25px; 
  color: white; 
  font-size: 16px; 
  border-radius: 10px; 
  cursor: pointer; 
  margin-right: 10px; 
  box-shadow: 0 0 10px #8a2be2,0 0 20px #4b0082;
  transition: all 0.3s ease;
}
.controls button:hover,
.back-button:hover { 
  transform: scale(1.05); 
  box-shadow: 0 0 20px #9b30ff,0 0 40px #6a0dad; 
}

/* === Timer === */
#timerContainer {
  margin-bottom: 20px;
  display: flex;
  align-items: center;
  gap: 15px;
  font-size: 18px;
}

#timerSelect {
  padding: 8px 12px;
  border-radius: 10px;
  border: none;
  font-size: 16px;
  background: rgba(255,255,255,0.1);
  color: #fff;
  cursor: pointer;
  box-shadow: 0 0 10px #8a2be2,0 0 20px #4b0082;
}

#timerValue {
  font-weight: bold;
  font-size: 20px;
  padding: 5px 15px;
  border-radius: 10px;
  background: rgba(255,255,255,0.1);
  box-shadow: 0 0 10px #8a2be2,0 0 20px #4b0082;
}

/* === Typing Area === */
#testText {
  font-size: 18px;
  padding: 20px;
  margin-bottom: 20px;
  background: rgba(255,255,255,0.05);
  border-radius: 10px;
  width: 100%;
  min-height: 150px;
  text-align: left;
  line-height: 1.6;
  overflow-wrap: break-word;
  box-sizing: border-box;
}

#inputArea {
  font-size: 18px;
  padding: 12px;
  width: 100%;
  max-width: 100%;
  border-radius: 10px;
  border: none;
  outline: none;
  box-sizing: border-box;
}

/* === Background Canvases === */
#starsCanvas,#rippleCanvas{
  position:fixed; top:0; left:0;
  width:100vw; height:100vh;
  pointer-events:none; z-index:0;
}

/* === Footer === */
footer{
  margin-top: 30px;
  font-size: 16px;
  color: #ccc;
}

/* === Responsive === */
@media screen and (max-width: 500px){
  .container { padding: 0 10px; }
  #testText { font-size: 16px; }
  #inputArea { font-size: 16px; padding: 10px; }
  #timerContainer { gap: 10px; font-size: 16px; }
}
</style>
</head>
<body>

<canvas id="starsCanvas"></canvas>
<canvas id="rippleCanvas"></canvas>

<header>
  Typing Test
  <div id="helpIcon" onclick="toggleHelp()">?</div>
</header>

<div id="helpText">
  <strong>How to Play Typing Test:</strong><br>
  1. Type the sentences as fast and accurately as you can.<br>
  2. The test starts automatically when you type.<br>
  3. Press Reset to start over.<br>
  4. Your WPM and accuracy are displayed live.
</div>

<div class="container">
  <div class="controls">
    <button onclick="resetTest()">Reset</button>
    <button class="back-button" onclick="goBack()">Back to Lobby</button>
  </div>

  <!-- Timer -->
  <div id="timerContainer">
    <select id="timerSelect">
      <option value="30">30s</option>
      <option value="60" selected>1 min</option>
      <option value="120">2 min</option>
      <option value="300">5 min</option>
      <option value="600">10 min</option>
    </select>
    <span id="timerValue">60s</span>
  </div>

  <div id="testText"></div>
  <input type="text" id="inputArea" placeholder="Start typing..." autofocus>
  <div id="status"></div>
</div>

<footer>Â© 2025 All rights reserved | ðŸš€ Developed by Accx Creations</footer>

<script>
/* === Help Toggle === */
function toggleHelp(){
  const help = document.getElementById('helpText');
  help.style.display = (help.style.display==='block')?'none':'block';
}

/* === Go Back === */
function goBack(){ window.location.href="index.html"; }

/* === Typing Test Logic === */
const sentences = [
"The quick brown fox jumps over the lazy dog.",
"Learning new skills improves your mind and body.",
"Technology is advancing faster than ever before.",
"Exercise regularly to stay healthy and strong.",
"Reading books expands your imagination and knowledge.",
"Music has the power to evoke deep emotions.",
"Traveling opens your eyes to new cultures and people.",
"Creativity is key to solving complex problems.",
"Practice makes perfect, never give up.",
"The sun rises every morning bringing light to the world.",
"Friendship is one of life's greatest treasures.",
"Education is the foundation of a bright future.",
"Patience is a virtue that everyone should learn.",
"Honesty is always the best policy.",
"Time management is crucial for success.",
"Nature provides beauty and peace for the soul.",
"Hard work beats talent when talent does not work hard.",
"A healthy diet leads to a happier life.",
"Kindness is contagious and spreads quickly.",
"Challenges help us grow and become stronger."
];

let testSentences = [];
for(let i=0;i<100;i++) testSentences.push(sentences[Math.floor(Math.random()*sentences.length)]);

const testTextDiv = document.getElementById('testText');
const inputArea = document.getElementById('inputArea');
const statusDiv = document.getElementById('status');
const timerSelect = document.getElementById('timerSelect');
const timerValue = document.getElementById('timerValue');

let currentIndex = 0;
let startTime = null;
let totalTyped = 0;
let correctTyped = 0;
let timerStarted = false;
let timeLeft = parseInt(timerSelect.value);
let timerInterval;

function loadSentence() {
  testTextDiv.innerHTML = "";
  const nextSentences = testSentences.slice(currentIndex, currentIndex+2); // show 2 sentences
  nextSentences.forEach(s=>{
    const p = document.createElement('p');
    p.textContent = s;
    testTextDiv.appendChild(p);
  });
}

function updateStats() {
  const elapsed = (Date.now() - startTime)/1000/60; // minutes
  const wpm = Math.round((correctTyped/5)/elapsed);
  const accuracy = Math.round((correctTyped/totalTyped)*100) || 0;
  statusDiv.textContent = `WPM: ${wpm} | Accuracy: ${accuracy}%`;
}

function resetTest() {
  currentIndex = 0;
  startTime = null;
  totalTyped = 0;
  correctTyped = 0;
  inputArea.value = "";
  loadSentence();
  statusDiv.textContent = "";
  timerStarted = false;
  clearInterval(timerInterval);
  timeLeft = parseInt(timerSelect.value);
  timerValue.textContent = timeLeft + "s";
}

/* === Timer === */
function startTimer() {
  if(timerStarted) return;
  timerStarted = true;
  timeLeft = parseInt(timerSelect.value);
  timerValue.textContent = timeLeft + "s";
  timerInterval = setInterval(() => {
    timeLeft--;
    timerValue.textContent = timeLeft + "s";
    if(timeLeft <= 0){
      clearInterval(timerInterval);
      inputArea.disabled = true;
      alert("Time's up!");
    }
  }, 1000);
}

inputArea.addEventListener('input', ()=>{
  if(!startTime) startTime = Date.now();
  startTimer();

  const currentSentence = testSentences[currentIndex];
  const typed = inputArea.value;
  totalTyped = typed.length;
  let correct = 0;
  for(let i=0;i<typed.length;i++){
    if(typed[i]===currentSentence[i]) correct++;
  }
  correctTyped = correct;
  updateStats();
  if(typed===currentSentence) {
    inputArea.value = "";
    currentIndex++;
    loadSentence();
  }
});

/* Update timer if selection changes */
timerSelect.addEventListener('change', ()=>{
  timeLeft = parseInt(timerSelect.value);
  timerValue.textContent = timeLeft + "s";
});

resetTest();

/* === Stars Background === */
const starsCanvas=document.getElementById("starsCanvas");
const starsCtx=starsCanvas.getContext("2d");
let stars=[];
function resizeStarsCanvas(){starsCanvas.width=window.innerWidth;starsCanvas.height=window.innerHeight;generateStars();}
function generateStars(){stars=[];for(let i=0;i<200;i++){stars.push({x:Math.random()*starsCanvas.width,y:Math.random()*starsCanvas.height,alpha:Math.random()*0.7+0.3,radius:Math.random()*1.5+0.5,speed:Math.random()*0.05+0.02});}}
function animateStars(){starsCtx.clearRect(0,0,starsCanvas.width,starsCanvas.height);stars.forEach(s=>{s.alpha+=s.speed*(Math.random()<0.5?-1:1);if(s.alpha<0.1)s.alpha=0.1;if(s.alpha>1)s.alpha=1;starsCtx.beginPath();starsCtx.arc(s.x,s.y,s.radius,0,Math.PI*2);starsCtx.fillStyle=`rgba(255,255,255,${s.alpha})`;starsCtx.fill();});requestAnimationFrame(animateStars);}
window.addEventListener("resize",resizeStarsCanvas);resizeStarsCanvas();animateStars();

/* === Ripple Trail === */
const rippleCanvas=document.getElementById("rippleCanvas");
const rippleCtx=rippleCanvas.getContext("2d");
let ripples=[];
function resizeRippleCanvas(){rippleCanvas.width=window.innerWidth;rippleCanvas.height=window.innerHeight;}
window.addEventListener("resize",resizeRippleCanvas);resizeRippleCanvas();
window.addEventListener("mousemove",(e)=>{ripples.push({x:e.clientX,y:e.clientY,radius:0,alpha:0.3,lineWidth:1+Math.random()});if(ripples.length>20)ripples.shift();});
function animateRipples(){rippleCtx.clearRect(0,0,rippleCanvas.width,rippleCanvas.height);ripples.forEach((r,i)=>{r.radius+=1.5;r.alpha-=0.007;if(r.alpha<=0){ripples.splice(i,1);return;}rippleCtx.beginPath();rippleCtx.arc(r.x,r.y,r.radius,0,Math.PI*2);rippleCtx.strokeStyle=`rgba(56,0,152,${r.alpha})`;rippleCtx.lineWidth=r.lineWidth;rippleCtx.stroke();});requestAnimationFrame(animateRipples);}
animateRipples();
</script>

</body>
</html>
