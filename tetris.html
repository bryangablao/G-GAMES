<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Tetris</title>
<style>
body{
  font-family:'Segoe UI',Tahoma,sans-serif;
  margin:0;padding:0;text-align:center;
  background: radial-gradient(circle at top left,#380098,black);
  background-size:200% 200%;
  animation:gradientMove 10s infinite alternate;
  color:#fff;overflow-x:hidden;
}
@keyframes gradientMove{0%{background-position:0% 50%}100%{background-position:100% 50%}}

header{
  background:linear-gradient(90deg,#8a2be2,#4b0082);
  padding:28px 20px;font-size:36px;font-weight:bold;
  letter-spacing:1px;text-shadow:0 0 5px #fff,0 0 10px #8a2be2,0 0 20px #4b0082;
  animation:neon 2s infinite alternate;position:relative;z-index:10;
}
@keyframes neon{
  0%,19%,21%,23%,25%,54%,56%,100%{text-shadow:0 0 5px #fff,0 0 10px #8a2be2,0 0 20px #4b0082}
  20%,24%,55%{text-shadow:0 0 2px #fff,0 0 5px #8a2be2,0 0 10px #4b0082}
}

/* HELP ICON */
#helpIcon{
  position:absolute;top:10px;right:15px;width:35px;height:35px;
  line-height:35px;font-size:24px;cursor:pointer;
  background:rgba(255,255,255,0.1);border-radius:50%;
}
#helpText{
  display:none;position:absolute;top:70px;right:15px;width:250px;
  padding:12px;background:rgba(0,0,0,.8);border-radius:10px;
  text-align:left;box-shadow:0 0 10px #8a2be2;z-index:20;
}

/* LAYOUT */
.container{
  max-width:1000px;margin:20px auto;
  display:flex;flex-wrap:nowrap;
  align-items:flex-start;justify-content:center;
  gap:10px;overflow-x:auto;
}

/* PLAYFIELD & PANEL */
.play-area, .panel{
  background:rgba(0,0,0,.35);
  border:2px solid #8a2be2;border-radius:12px;
  box-shadow:0 0 12px #8a2be2;
  padding:10px;flex-shrink:0;
}
.play-area canvas{
  background:#000;border-radius:6px;display:block;image-rendering:pixelated;
  width:300px;height:600px;max-width:80vw;
}
.panel{width:220px;flex-shrink:0;}
.panel h3{margin:6px 0 8px}
.info{font-size:18px;color:#ffd700}
.small{font-size:14px;color:#ccc;margin-bottom:8px}

button{
  background:#8a2be2;color:#fff;border:none;padding:8px 14px;margin:4px;
  border-radius:8px;cursor:pointer;box-shadow:0 0 8px #8a2be2;font-size:14px
}
button:hover{transform:scale(1.03)}
select{padding:6px;border-radius:6px;background:#222;color:#fff;border:none}

/* FOOTER */
footer{
  margin-top:20px;font-size:14px;color:#aaa;
}

/* MODAL */
#endModal{
  display:none;position:fixed;inset:0;background:rgba(0,0,0,.8);
  justify-content:center;align-items:center;flex-direction:column;z-index:50;color:#fff
}
#endModal h2{font-size:32px;margin-bottom:8px}

/* PREVIEWS */
canvas#next,canvas#holdCanvas{
  background:#000;border-radius:6px;display:block;margin:8px auto;image-rendering:pixelated;
  width:120px;height:120px;
}

/* BG CANVAS */
#starsCanvas,#rippleCanvas{
  position:fixed;top:0;left:0;width:100vw;height:100vh;pointer-events:none;z-index:0
}
</style>
</head>
<body>

<canvas id="starsCanvas"></canvas>
<canvas id="rippleCanvas"></canvas>

<header>
  Tetris
  <div id="helpIcon" onclick="toggleHelp()">?</div>
</header>
<div id="helpText">
 <strong>How to Play:</strong><br>
 Move: ‚Üê ‚Üí / Swipe Left/Right<br>
 Rotate: Z/X or Double-Tap<br>
 Soft Drop: ‚Üì / Swipe Down<br>
 Hard Drop: Space / Swipe Up<br>
 Hold: C / Button<br>
 Pause: P / Button
</div>

<div class="container">
  <div class="play-area">
    <canvas id="play" width="300" height="600"></canvas>
  </div>

  <div class="panel">
    <h3>Score</h3>
    <div class="info">Score: <span id="score">0</span></div>
    <div class="small">Lines: <span id="lines">0</span></div>
    <div class="small">Level: <span id="level">1</span></div>

    <h3>Next</h3>
    <canvas id="next" width="120" height="120"></canvas>

    <h3>Hold</h3>
    <canvas id="holdCanvas" width="120" height="120"></canvas>

    <div>
      <button id="startBtn">New Game</button>
      <button id="pauseBtn">Pause</button>
    </div>

    <div>
      Speed:
      <select id="speed">
        <option value="1">Normal</option>
        <option value="0.8">Fast</option>
        <option value="0.6">Faster</option>
      </select>
    </div>
  </div>
</div>

<footer>¬© 2025 All Rights Reserved | üöÄ Developed by Accx Creations</footer>

<div id="endModal">
  <h2 id="modalMessage">Game Over</h2>
  <p>Score: <span id="finalScore">0</span></p>
  <button onclick="restart()">Restart</button>
  <button onclick="closeModal()">Close</button>
</div>

<script>
/* === HELP === */
function toggleHelp(){
  const h=document.getElementById('helpText');
  h.style.display=h.style.display==='block'?'none':'block';
}

/* === CANVAS BACKGROUND ANIMATION === */
const starsCanvas=document.getElementById('starsCanvas');
const starsCtx=starsCanvas.getContext('2d');
let stars=[];
function resizeStars(){starsCanvas.width=window.innerWidth;starsCanvas.height=window.innerHeight;generateStars();}
function generateStars(){
  stars=[];
  for(let i=0;i<200;i++){
    stars.push({x:Math.random()*starsCanvas.width,y:Math.random()*starsCanvas.height,
      alpha:Math.random()*0.7+0.3,radius:Math.random()*1.5+0.5,flickerSpeed:Math.random()*0.05+0.02});
  }
}
function animateStars(){
  starsCtx.clearRect(0,0,starsCanvas.width,starsCanvas.height);
  stars.forEach(star=>{
    star.alpha+=star.flickerSpeed*(Math.random()<0.5?-1:1);
    if(star.alpha<0.1) star.alpha=0.1;
    if(star.alpha>1) star.alpha=1;
    starsCtx.beginPath();
    starsCtx.arc(star.x,star.y,star.radius,0,Math.PI*2);
    starsCtx.fillStyle=`rgba(255,255,255,${star.alpha})`;
    starsCtx.fill();
  });
  requestAnimationFrame(animateStars);
}
window.addEventListener('resize',resizeStars);
resizeStars();generateStars();animateStars();

/* Ripple effect */
const rippleCanvas=document.getElementById('rippleCanvas');
const rippleCtx=rippleCanvas.getContext('2d');
let ripples=[];
function resizeRipple(){rippleCanvas.width=window.innerWidth;rippleCanvas.height=window.innerHeight;}
window.addEventListener('resize',resizeRipple);resizeRipple();
window.addEventListener('mousemove',(e)=>{
  ripples.push({x:e.clientX,y:e.clientY,radius:0,alpha:0.3,lineWidth:1+Math.random()});
  if(ripples.length>20) ripples.shift();
});
function animateRipples(){
  rippleCtx.clearRect(0,0,rippleCanvas.width,rippleCanvas.height);
  ripples.forEach((r,i)=>{
    r.radius+=1.5;r.alpha-=0.007;
    if(r.alpha<=0){ripples.splice(i,1);return;}
    rippleCtx.beginPath();
    rippleCtx.arc(r.x,r.y,r.radius,0,Math.PI*2);
    rippleCtx.strokeStyle=`rgba(56,0,152,${r.alpha})`;
    rippleCtx.lineWidth=r.lineWidth;
    rippleCtx.stroke();
  });
  requestAnimationFrame(animateRipples);
}
animateRipples();

/* === SIMPLE TETRIS LOGIC (basic sample) === */
const playCanvas=document.getElementById('play');
const ctx=playCanvas.getContext('2d');
const COLS=10, ROWS=20, BLOCK=30;
let board=Array.from({length:ROWS},()=>Array(COLS).fill(''));
let current, nextPiece, holdPiece=null, canHold=true;
let dropInterval=800, dropCounter=0, lastTime=0, score=0, lines=0, level=1, paused=false, gameOver=false;

const pieces={
  I:[['0000','1111','0000','0000']],
  O:[['11','11']],
  T:[['010','111']],
  L:[['100','111']],
  J:[['001','111']],
  S:[['011','110']],
  Z:[['110','011']]
};
const colors={I:'#00f0f0',O:'#f0f000',T:'#a000f0',L:'#f0a000',J:'#0000f0',S:'#00f000',Z:'#f00000'};

function newPiece(type){
  const shape=pieces[type];
  return {type,shape:shape[0].split('').map(r=>r.split('')),x:3,y:0};
}
function randomPiece(){return newPiece(Object.keys(pieces)[Math.floor(Math.random()*7)]);}
function resetGame(){
  board=Array.from({length:ROWS},()=>Array(COLS).fill(''));
  current=randomPiece();nextPiece=randomPiece();holdPiece=null;canHold=true;
  score=0;lines=0;level=1;updateScore();
  gameOver=false;
}
function collide(p){
  for(let y=0;y<p.shape.length;y++){
    for(let x=0;x<p.shape[y].length;x++){
      if(p.shape[y][x]==='1'){
        let ny=p.y+y,nx=p.x+x;
        if(ny<0||nx<0||nx>=COLS||ny>=ROWS||board[ny][nx])return true;
      }
    }
  }
  return false;
}
function merge(){
  current.shape.forEach((row,y)=>{
    row.forEach((val,x)=>{
      if(val==='1')board[current.y+y][current.x+x]=current.type;
    });
  });
}
function draw(){
  ctx.clearRect(0,0,playCanvas.width,playCanvas.height);
  for(let y=0;y<ROWS;y++){
    for(let x=0;x<COLS;x++){
      if(board[y][x])drawBlock(x,y,colors[board[y][x]]);
    }
  }
  // draw ghost
  let gy=current.y;
  while(!collide({...current,y:gy+1}))gy++;
  current.shape.forEach((r,y)=>{
    r.forEach((v,x)=>{
      if(v==='1')drawBlock(current.x+x,gy+y,'rgba(255,255,255,0.2)');
    });
  });
  // draw current
  current.shape.forEach((r,y)=>{
    r.forEach((v,x)=>{
      if(v==='1')drawBlock(current.x+x,current.y+y,colors[current.type]);
    });
  });
}
function drawBlock(x,y,color){
  ctx.fillStyle=color;
  ctx.fillRect(x*BLOCK,y*BLOCK,BLOCK,BLOCK);
  ctx.strokeStyle='#222';
  ctx.strokeRect(x*BLOCK,y*BLOCK,BLOCK,BLOCK);
}
function move(dir){current.x+=dir;if(collide(current))current.x-=dir;}
function drop(){
  current.y++;
  if(collide(current)){current.y--;merge();clearLines();current=nextPiece;nextPiece=randomPiece();canHold=true;
    if(collide(current)){endGame();}}
}
function rotate(){
  const prev=current.shape;
  const N=prev.length;
  const rotated=Array.from({length:N},()=>Array(N).fill('0'));
  for(let y=0;y<N;y++)for(let x=0;x<N;x++)rotated[x][N-1-y]=prev[y][x];
  current.shape=rotated;if(collide(current))current.shape=prev;
}
function hardDrop(){while(!collide(current))current.y++;current.y--;drop();}
function hold(){
  if(!canHold)return;
  if(!holdPiece){holdPiece=current;current=nextPiece;nextPiece=randomPiece();}
  else{[holdPiece,current]=[current,holdPiece];current.x=3;current.y=0;}
  canHold=false;
}
function clearLines(){
  let cleared=0;
  for(let y=ROWS-1;y>=0;y--){
    if(board[y].every(c=>c)){board.splice(y,1);board.unshift(Array(COLS).fill(''));cleared++;}
  }
  if(cleared){
    score+=cleared*100;lines+=cleared;
    if(lines>=level*10){level++;dropInterval*=0.9;}
    updateScore();
  }
}
function updateScore(){
  document.getElementById('score').textContent=score;
  document.getElementById('lines').textContent=lines;
  document.getElementById('level').textContent=level;
}
function gameLoop(time=0){
  if(paused||gameOver)return;
  const delta=time-lastTime;lastTime=time;
  dropCounter+=delta;
  if(dropCounter>dropInterval){drop();dropCounter=0;}
  draw();
  requestAnimationFrame(gameLoop);
}
function endGame(){
  gameOver=true;
  document.getElementById('endModal').style.display='flex';
  document.getElementById('finalScore').textContent=score;
}
function restart(){
  document.getElementById('endModal').style.display='none';
  resetGame();requestAnimationFrame(gameLoop);
}
function closeModal(){document.getElementById('endModal').style.display='none';}

document.getElementById('startBtn').addEventListener('click',()=>{resetGame();requestAnimationFrame(gameLoop);});
document.getElementById('pauseBtn').addEventListener('click',()=>paused=!paused);
document.getElementById('speed').addEventListener('change',e=>{dropInterval=800*parseFloat(e.target.value);});

document.addEventListener('keydown',e=>{
  if(gameOver)return;
  switch(e.key){
    case'ArrowLeft':move(-1);break;
    case'ArrowRight':move(1);break;
    case'ArrowDown':drop();break;
    case' ':hardDrop();break;
    case'z':case'Z':rotate();break;
    case'c':case'C':hold();break;
    case'p':case'P':paused=!paused;break;
  }
});

/* === TOUCH CONTROLS FOR MOBILE === */
let touchStartX=0,touchStartY=0,touchStartTime=0;
playCanvas.addEventListener('touchstart',e=>{
  const t=e.touches[0];
  touchStartX=t.clientX;
  touchStartY=t.clientY;
  touchStartTime=Date.now();
  e.preventDefault();
});
playCanvas.addEventListener('touchend',e=>{
  const t=e.changedTouches[0];
  const dx=t.clientX-touchStartX;
  const dy=t.clientY-touchStartY;
  const dt=Date.now()-touchStartTime;
  // swipe detection
  if(Math.abs(dx)>30 || Math.abs(dy)>30){
    if(Math.abs(dx)>Math.abs(dy)){
      if(dx>0) move(1); else move(-1);
    } else {
      if(dy>0) drop(); else hardDrop();
    }
  } else {
    // tap detection (double-tap for rotate)
    if(dt<300){ // short tap
      rotate();
    }
  }
});

resetGame();
requestAnimationFrame(gameLoop);
</script>
</body>
</html>
